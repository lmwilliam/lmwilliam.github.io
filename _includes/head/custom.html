<!-- start custom head snippets -->
<script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn1.lncld.net/static/js/3.4.1/av-min.js"></script>
<script src="/assets/js/jquery.lazyloadxt.min.js"></script>
<script src="/assets/js/jquery.lazyloadxt.extra.min.js"></script>
<script>
  $(function() {
    AV.init({
      appId: '{{ site.pageview.leancloud.app_id }}',
      appKey: '{{ site.pageview.leancloud.app_key }}'
    });
    $(".js-pageview").each(function() {
      var curId = this.id;
      var query = new AV.Query('{{ site.pageview.leancloud.app_class }}');
      query.equalTo('key', curId.substr(9));
      query.first().then(function(result) {
        if (result) {
          $('#' + curId).text(result.attributes.views);
        }
      }, function(error) {
        if (error) {
          throw error;
        }
      });
    });
  });
</script>
<!-- end custom head snippets -->
